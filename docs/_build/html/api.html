<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Rest APIs Integration &#8212; Selenium Two 0.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=fc7d8818"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="canonical" href="https://neriazv.github.io/Neri-Library/api.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="System Operations &amp; Utilities" href="system.html" />
    <link rel="prev" title="Terminal Tool (CLI)" href="cli.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="rest-apis-integration">
<h1>Rest APIs Integration<a class="headerlink" href="#rest-apis-integration" title="Link to this heading">¶</a></h1>
<p>The SeleniumTwo API module provides enterprise-grade HTTP client functionality with built-in error handling, retry mechanisms, and simplified authentication patterns that dramatically reduce API integration complexity.</p>
<section id="api-functions-overview">
<h2>API Functions Overview<a class="headerlink" href="#api-functions-overview" title="Link to this heading">¶</a></h2>
</section>
<section id="invoke-api-list-simple-api-calls">
<h2>invoke_api_list: Simple API Calls<a class="headerlink" href="#invoke-api-list-simple-api-calls" title="Link to this heading">¶</a></h2>
<p><strong>Before (Raw Requests Complexity)</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="c1"># Manual implementation with error handling</span>
<span class="k">def</span><span class="w"> </span><span class="nf">api_call_with_retry</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">max_attempts</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x-access-token&quot;</span><span class="p">:</span> <span class="n">token</span><span class="p">}</span>

    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_attempts</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;GET&quot;</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;PUT&quot;</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;PATCH&quot;</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid method: </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Manual error detection</span>
            <span class="k">if</span> <span class="s2">&quot;Sequelize&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()):</span>
                <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database error: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempt </span><span class="si">{</span><span class="n">attempt</span><span class="si">}</span><span class="s2"> failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attempt</span> <span class="o">&lt;</span> <span class="n">max_attempts</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Retrying in 5 seconds...&quot;</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;API call failed after all attempts&quot;</span><span class="p">)</span>

<span class="c1"># Complex usage</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">api_call_with_retry</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;your_token_12345&quot;</span><span class="p">,</span>
    <span class="s2">&quot;GET&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>After (SeleniumTwo Simplicity)</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">SeleniumTwo</span><span class="w"> </span><span class="kn">import</span> <span class="n">invoke_api_list</span>

<span class="c1"># One-line API call with all features</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token_12345&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span>
    <span class="n">print_response</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="invoke-api-proc-complex-payload-processing">
<h2>invoke_api_proc: Complex Payload Processing<a class="headerlink" href="#invoke-api-proc-complex-payload-processing" title="Link to this heading">¶</a></h2>
<p><strong>Before (Manual Payload Management)</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">def</span><span class="w"> </span><span class="nf">complex_api_call</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">payload_data</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">):</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x-access-token&quot;</span><span class="p">:</span> <span class="n">token</span><span class="p">}</span>
    <span class="n">max_attempts</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_attempts</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">]:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                    <span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload_data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                    <span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload_data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span>
                <span class="p">)</span>

            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

            <span class="c1"># Manual response extraction</span>
            <span class="n">json_response</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">json_response</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;STATUS&#39;</span><span class="p">]</span>

            <span class="k">return</span> <span class="n">status</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempt </span><span class="si">{</span><span class="n">attempt</span><span class="si">}</span><span class="s2"> failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attempt</span> <span class="o">&lt;</span> <span class="n">max_attempts</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;API processing failed&quot;</span><span class="p">)</span>

<span class="c1"># Complex implementation</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;ID&quot;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;STATUS&quot;</span><span class="p">:</span> <span class="s2">&quot;completed&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;PAGAMENTO&quot;</span><span class="p">:</span> <span class="s2">&quot;approved&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">complex_api_call</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/process&quot;</span><span class="p">,</span>
    <span class="n">payload</span><span class="p">,</span>
    <span class="s2">&quot;your_token_12345&quot;</span><span class="p">,</span>
    <span class="s2">&quot;POST&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>After (SeleniumTwo Streamlined)</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">SeleniumTwo</span><span class="w"> </span><span class="kn">import</span> <span class="n">invoke_api_proc</span>

<span class="n">payload_vars</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;ID&quot;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;STATUS&quot;</span><span class="p">:</span> <span class="s2">&quot;completed&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;PAGAMENTO&quot;</span><span class="p">:</span> <span class="s2">&quot;approved&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># Single function call with advanced features</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">invoke_api_proc</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/process&quot;</span><span class="p">,</span>
    <span class="n">payload_vars</span><span class="o">=</span><span class="n">payload_vars</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token_12345&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
    <span class="n">print_response</span><span class="o">=</span><span class="s2">&quot;full&quot;</span>  <span class="c1"># Options: False, True, or &quot;full&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="invoke-api-proc-log-simplified-logging-api">
<h2>invoke_api_proc_log: Simplified Logging API<a class="headerlink" href="#invoke-api-proc-log-simplified-logging-api" title="Link to this heading">¶</a></h2>
<p><strong>Before (Manual Log Implementation)</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="k">def</span><span class="w"> </span><span class="nf">send_robot_log</span><span class="p">(</span><span class="n">api_url</span><span class="p">,</span> <span class="n">robot_id</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">):</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">robot_id</span><span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x-access-token&quot;</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">}</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">api_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Log response: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Manual call</span>
<span class="n">send_robot_log</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/logs&quot;</span><span class="p">,</span>
    <span class="mi">12345</span><span class="p">,</span>
    <span class="s2">&quot;your_token_12345&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>After (SeleniumTwo Optimized)</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">SeleniumTwo</span><span class="w"> </span><span class="kn">import</span> <span class="n">invoke_api_proc_log</span>

<span class="c1"># Ultra-simple logging call</span>
<span class="n">invoke_api_proc_log</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/logs&quot;</span><span class="p">,</span>
    <span class="n">id_robo</span><span class="o">=</span><span class="mi">12345</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token_12345&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="advanced-features-benefits">
<h2>Advanced Features &amp; Benefits<a class="headerlink" href="#advanced-features-benefits" title="Link to this heading">¶</a></h2>
<section id="automatic-retry-mechanism">
<h3>Automatic Retry Mechanism<a class="headerlink" href="#automatic-retry-mechanism" title="Link to this heading">¶</a></h3>
<p><strong>Built-in Resilience</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Automatic 5-attempt retry with exponential backoff</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://unstable-api.example.com/data&quot;</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span>
<span class="p">)</span>

<span class="c1"># No need to implement:</span>
<span class="c1"># - Retry loops</span>
<span class="c1"># - Error counting</span>
<span class="c1"># - Sleep timers</span>
<span class="c1"># - Final exception handling</span>
</pre></div>
</div>
</section>
<section id="intelligent-error-detection">
<h3>Intelligent Error Detection<a class="headerlink" href="#intelligent-error-detection" title="Link to this heading">¶</a></h3>
<p><strong>Database Error Auto-Detection</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Automatically detects Sequelize database errors</span>
<span class="c1"># Raises meaningful SystemError with formatted message</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span>
        <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/failing-endpoint&quot;</span><span class="p">,</span>
        <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="ne">SystemError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database error detected: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API failure after retries: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="smart-payload-handling">
<h3>Smart Payload Handling<a class="headerlink" href="#smart-payload-handling" title="Link to this heading">¶</a></h3>
<p><strong>Automatic Content-Type Management</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GET/DELETE: uses params (query string)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/search&quot;</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span>  <span class="c1"># Auto-uses params=payload</span>
<span class="p">)</span>

<span class="c1"># POST/PUT/PATCH: uses json (request body)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">invoke_api_proc</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/update&quot;</span><span class="p">,</span>
    <span class="n">payload_vars</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">},</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span>  <span class="c1"># Auto-uses json=payload</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="flexible-response-handling">
<h3>Flexible Response Handling<a class="headerlink" href="#flexible-response-handling" title="Link to this heading">¶</a></h3>
<p><strong>Multiple Response Display Options</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># No output (silent operation)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span><span class="p">,</span>
    <span class="n">print_response</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># Basic response printing</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span><span class="p">,</span>
    <span class="n">print_response</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># Full JSON response return</span>
<span class="n">full_response</span> <span class="o">=</span> <span class="n">invoke_api_proc</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/process&quot;</span><span class="p">,</span>
    <span class="n">payload_vars</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
    <span class="n">print_response</span><span class="o">=</span><span class="s2">&quot;full&quot;</span>  <span class="c1"># Returns complete JSON</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="enterprise-grade-security">
<h3>Enterprise-Grade Security<a class="headerlink" href="#enterprise-grade-security" title="Link to this heading">¶</a></h3>
<p><strong>Automatic Header Management</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default security headers</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x-access-token&quot;</span><span class="p">:</span> <span class="n">token</span><span class="p">}</span>

<span class="c1"># Custom header support</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span>
    <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://secure-api.example.com/data&quot;</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer your_token&quot;</span><span class="p">}</span>  <span class="c1"># Override defaults</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="production-usage-examples">
<h2>Production Usage Examples<a class="headerlink" href="#production-usage-examples" title="Link to this heading">¶</a></h2>
<section id="complete-api-integration-workflow">
<h3>Complete API Integration Workflow<a class="headerlink" href="#complete-api-integration-workflow" title="Link to this heading">¶</a></h3>
<p><strong>Before (Complex Multi-Function Setup)</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">class</span><span class="w"> </span><span class="nc">APIClient</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_url</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_url</span> <span class="o">=</span> <span class="n">base_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">token</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_make_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x-access-token&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">}</span>
        <span class="n">max_attempts</span> <span class="o">=</span> <span class="mi">5</span>

        <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_attempts</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">]:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

                <span class="k">if</span> <span class="s2">&quot;Sequelize&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DB error: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">attempt</span> <span class="o">==</span> <span class="n">max_attempts</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_request</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;GET&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_request</span><span class="p">(</span><span class="s2">&quot;process&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_request</span><span class="p">(</span><span class="s2">&quot;logs&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">robot_id</span><span class="p">})</span>

<span class="c1"># Complex instantiation and usage</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">APIClient</span><span class="p">(</span><span class="s2">&quot;https://api.example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;token_12345&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">update_process</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">log_activity</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>After (SeleniumTwo Streamlined Approach)</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">SeleniumTwo</span><span class="w"> </span><span class="kn">import</span> <span class="n">invoke_api_list</span><span class="p">,</span> <span class="n">invoke_api_proc</span><span class="p">,</span> <span class="n">invoke_api_proc_log</span>

<span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.example.com&quot;</span>
<span class="n">token</span> <span class="o">=</span> <span class="s2">&quot;token_12345&quot;</span>

<span class="c1"># Clean, functional approach</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/data&quot;</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">invoke_api_proc</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/process&quot;</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">)</span>
<span class="n">invoke_api_proc_log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/logs&quot;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="error-resilient-data-pipeline">
<h3>Error-Resilient Data Pipeline<a class="headerlink" href="#error-resilient-data-pipeline" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">SeleniumTwo</span><span class="w"> </span><span class="kn">import</span> <span class="n">invoke_api_list</span><span class="p">,</span> <span class="n">invoke_api_proc</span>

<span class="k">def</span><span class="w"> </span><span class="nf">data_processing_pipeline</span><span class="p">():</span>
    <span class="c1"># Step 1: Fetch data with automatic retry</span>
    <span class="n">raw_data</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span>
        <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/raw-data&quot;</span><span class="p">,</span>
        <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span><span class="p">,</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span>
        <span class="n">print_response</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>

    <span class="c1"># Step 2: Process and send with payload validation</span>
    <span class="n">processed_status</span> <span class="o">=</span> <span class="n">invoke_api_proc</span><span class="p">(</span>
        <span class="n">link</span><span class="o">=</span><span class="s2">&quot;https://api.example.com/process-data&quot;</span><span class="p">,</span>
        <span class="n">payload_vars</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;original_data&quot;</span><span class="p">:</span> <span class="n">raw_data</span><span class="p">,</span>
            <span class="s2">&quot;processed_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-01-01&quot;</span><span class="p">,</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;completed&quot;</span>
        <span class="p">},</span>
        <span class="n">token</span><span class="o">=</span><span class="s2">&quot;your_token&quot;</span><span class="p">,</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
        <span class="n">print_response</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Monitor processing</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">processed_status</span>
</pre></div>
</div>
</section>
</section>
<section id="technical-advantages">
<h2>Technical Advantages<a class="headerlink" href="#technical-advantages" title="Link to this heading">¶</a></h2>
<p><strong>Code Reduction</strong>: 80% less code compared to manual requests implementation
<strong>Built-in Resilience</strong>: Automatic retry mechanisms eliminate boilerplate error handling
<strong>Consistent Error Handling</strong>: Unified exception patterns across all API calls
<strong>Security Best Practices</strong>: Automatic header management and token security
<strong>Production Ready</strong>: Battle-tested with Sequelize error detection and status extraction
<strong>Developer Experience</strong>: Intuitive parameters with smart defaults</p>
<p><strong>Performance Benefits</strong>:
- Automatic connection pooling through requests
- Smart payload serialization (params vs json)
- Minimal overhead with maximum functionality
- Efficient retry logic with progressive delays</p>
<p><strong>Enterprise Features</strong>:
- Database error pattern recognition
- Customizable retry attempts (fixed at 5, easily modified)
- Flexible response handling (silent, basic, full)
- Cross-platform compatibility
- PyInstaller-friendly imports</p>
</section>
<section id="migration-guide">
<h2>Migration Guide<a class="headerlink" href="#migration-guide" title="Link to this heading">¶</a></h2>
<p><strong>From Manual Requests</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># OLD: Manual implementation</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Manual error handling...</span>

<span class="c1"># NEW: SeleniumTwo approach</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="s2">&quot;GET&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>From Complex API Clients</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># OLD: Custom client class</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">APIClient</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>

<span class="c1"># NEW: Direct function calls</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">invoke_api_list</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/data&quot;</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">¶</a></h2>
<p>SeleniumTwo’s API module transforms complex HTTP client implementation into simple, reliable function calls. The library eliminates the need for custom retry logic, manual error handling, and payload management while providing enterprise-grade features out of the box.</p>
<p>Key Benefits:
- <strong>Simplified Syntax</strong>: Complex API calls become single-line functions
- <strong>Automatic Resilience</strong>: Built-in retry mechanisms handle transient failures
- <strong>Production Security</strong>: Automatic header management and error detection
- <strong>Developer Productivity</strong>: 80% reduction in API-related code
- <strong>Maintenance Friendly</strong>: Consistent patterns across all API interactions</p>
<p>The module represents the ideal balance between simplicity and power, making API integration accessible for beginners while providing advanced features for enterprise applications.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Selenium Two</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="driver.html">Browser Instance &amp; Driver Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Terminal Tool (CLI)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Rest APIs Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api-functions-overview">API Functions Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#invoke-api-list-simple-api-calls">invoke_api_list: Simple API Calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="#invoke-api-proc-complex-payload-processing">invoke_api_proc: Complex Payload Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#invoke-api-proc-log-simplified-logging-api">invoke_api_proc_log: Simplified Logging API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-features-benefits">Advanced Features &amp; Benefits</a></li>
<li class="toctree-l2"><a class="reference internal" href="#production-usage-examples">Production Usage Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#technical-advantages">Technical Advantages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#migration-guide">Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="system.html">System Operations &amp; Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="elements.html">Element Manipulation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="cli.html" title="previous chapter">Terminal Tool (CLI)</a></li>
      <li>Next: <a href="system.html" title="next chapter">System Operations &amp; Utilities</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Guilherme Neri.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/api.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>